# this is the superstore_data_analytics__orders topic
base_view: superstore_data_analytics__orders

required_access_grants: [ sales_team ]
access_filters:
  - field: superstore_data_analytics__customers.market
    user_attribute: market
    values_for_unfiltered: [ admin ]

joins:
  superstore_data_analytics__customers: {}
  superstore_data_analytics__products: {}
  superstore_data_analytics__returns: {}

relationships:
  - join_from_view: superstore_data_analytics__orders
    join_to_view: superstore_data_analytics__customers
    join_type: always_left
    on_sql: ${superstore_data_analytics__orders.customer_id} =
      ${superstore_data_analytics__customers.id}
    relationship_type: many_to_one

  - join_from_view: superstore_data_analytics__orders
    join_to_view: superstore_data_analytics__products
    join_type: always_left
    on_sql: ${superstore_data_analytics__orders.product_id} =
      ${superstore_data_analytics__products.id}
    relationship_type: many_to_one

  - join_from_view: superstore_data_analytics__orders
    join_to_view: superstore_data_analytics__returns
    join_type: always_left
    on_sql: ${superstore_data_analytics__orders.order_id} =
      ${superstore_data_analytics__returns.order_id}
    relationship_type: one_to_one
